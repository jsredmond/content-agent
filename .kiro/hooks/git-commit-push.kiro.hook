{
  "enabled": true,
  "name": "Git Commit & Push",
  "description": "Stages all changes, generates a commit message with appropriate scope ([fix], [security], [feat], [docs], [refactor], [deps]) based on files changed, commits, and pushes to origin. Reports commit hash and summary after completion.",
  "version": "1",
  "when": {
    "type": "userTriggered"
  },
  "then": {
    "type": "askAgent",
    "prompt": "Commit all staged and unstaged changes and push to remote. Follow these steps:\n\n1. Run `git add -A` to stage all changes\n2. Run `git status` to see what files changed\n3. Based on the files changed, determine the appropriate scope:\n   - [fix] for bug fixes\n   - [security] for security-related changes (files in modules/guardduty, modules/securityhub, modules/detective, SECURITY.md, etc.)\n   - [feat] for new features\n   - [docs] for documentation changes (.md files, README files)\n   - [refactor] for code refactoring\n   - [deps] for dependency updates (versions.tf, .terraform.lock.hcl, requirements.txt)\n4. Generate a commit message following the format: `[scope] short description`\n5. Run `git commit -m \"your message\"`\n6. Run `git push origin HEAD`\n7. Run `git log -1 --oneline` to get the commit hash\n8. Report the commit hash and a summary of what was committed"
  }
}